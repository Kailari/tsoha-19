{% extends "layout.html" %}
{% from "macros/feed.html" import posts_feed with context %}

{% block body %}
<div class="mb-3">
  <h1 class="mb-0">Feed</h1>
  <hr class="my-0">
  <small class="text-muted">All posts from your own wall and from all of your subscribed walls.</small>
</div>
{{ posts_feed(posts, redir='user_feed', redir_id=current_user.id, back='user_feed', back_id=current_user.id) }}
<div>
  <div class="overlay" onclick="backToTop()">
    <span class="text-white">Back to top</span>
  </div>
  <div class="text-center">
    <hr>
    <span class="text-muted">No more posts :c</span>
    <hr>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  var sizeTheOverlays = function () {
    $(".overlay").resize().each(function () {
      var h = $(this).parent().outerHeight();
      var w = $(this).parent().outerWidth();
      $(this).css("height", h);
      $(this).css("width", w);
    });
  };

  sizeTheOverlays();

  var width = $(window).width();
  $(window).resize(function () {
    if ($(this).width() != width) {
      width = $(this).width();
      sizeTheOverlays();
    }
  });

  function backToTop() {
    document.body.scrollTop = 0
    document.documentElement.scrollTop = 0
  }
</script>
{% endblock %}